{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{173:function(s,t,a){\"use strict\";a.r(t);var n=a(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a(\"div\",{staticClass:\"content\"},[a(\"h1\",{attrs:{id:\"custom-docker\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#custom-docker\",\"aria-hidden\":\"true\"}},[s._v(\"#\")]),s._v(\" Custom docker\")]),s._v(\" \"),a(\"div\",{staticClass:\"warning custom-block\"},[a(\"p\",{staticClass:\"custom-block-title\"},[s._v(\"WARNING\")]),s._v(\" \"),a(\"p\",[s._v(\"This page is still work in progress\")])]),s._v(\" \"),a(\"p\",[s._v(\"Vapor Cloud is built using very scalable Docker templates for running Vapor. But sometimes you can experience cases where you want to change the Docker template, either because you need some major changes to the template, or simply want to run something different from Vapor, for example a VueJS frontend application for your Vapor app.\")]),s._v(\" \"),a(\"p\",[s._v(\"To accomplish this, you can easily change the Docker template used by the deployment process.\\nSetting up custom docker template\")]),s._v(\" \"),a(\"p\",[s._v(\"Start by adding a Dockerfile in your application root. The Vapor Cloud docker setup supports Multi-step docker build.\\nHere is an example of a VueJS template using NGinx\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-docker line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-docker\"}},[a(\"code\",[a(\"span\",{attrs:{class:\"token comment\"}},[s._v(\"# build stage\")]),s._v(\"\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[s._v(\"FROM\")]),s._v(\" node\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"9.11.1\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"alpine as build\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"stage\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[s._v(\"WORKDIR\")]),s._v(\" /app\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[s._v(\"COPY\")]),s._v(\" package*.json ./\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[s._v(\"RUN\")]),s._v(\" npm install\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[s._v(\"COPY\")]),s._v(\" . .\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[s._v(\"RUN\")]),s._v(\" npm run build\\n\\n\"),a(\"span\",{attrs:{class:\"token comment\"}},[s._v(\"# production stage\")]),s._v(\"\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[s._v(\"FROM\")]),s._v(\" nginx\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"1.13.12\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"alpine as production\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"stage\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[s._v(\"COPY\")]),s._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"from=build\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"stage /app/dist /usr/share/nginx/html/dist\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[s._v(\"COPY\")]),s._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"from=build\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"stage /app/index.html /usr/share/nginx/html\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[s._v(\"COPY\")]),s._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"from=build\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"stage /app/public /usr/share/nginx/html/public\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[s._v(\"RUN\")]),s._v(\" chown \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"R nginx\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"nginx /usr/share/nginx/html/\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[s._v(\"EXPOSE\")]),s._v(\" 80\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[s._v(\"CMD\")]),s._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{attrs:{class:\"token string\"}},[s._v('\"nginx\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[s._v('\"-g\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{attrs:{class:\"token string\"}},[s._v('\"daemon off;\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\")])])])}],!1,null,null,null);t.default=e.exports}}]);","extractedComments":[]}